
编写解析器的主要困难在于未能正确组织代码。解析器应该在比从字符串读取字符更高的级别上操作。关于如何使复杂性易于管理的一些建议：

- 编写许多函数，并保持它们的小。在每一种功能中，做一件事并把它做好。

- 不要尝试使用regexp进行解析。它们不起作用，我建议把它们限制在非常简单的事情上。

- 不要试图猜测。当不确定如何解析某些内容时，抛出一个错误并确保消息包含错误位置(行/列)。

- 为了保持简单，我将我的代码分成了三个部分，这些部分被进一步分成许多小函数：